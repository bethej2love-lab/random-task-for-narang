<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•  ì¼ ëœë¤ ë½‘ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --accent: #4b8cff;
      --accent-soft: #8faefc;
      --accent-bg: #f4f4f4;
      --card-bg: #ffffff;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding-top: 40px;
      background: var(--accent-bg, #f4f4f4);
      transition: background 0.3s ease;
    }
    .card {
      background: var(--card-bg, #ffffff);
      padding: 24px 32px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      text-align: center;
      max-width: 420px;
      width: 100%;
      box-sizing: border-box;
      transition: background 0.3s ease, box-shadow 0.2s ease, transform 0.1s ease;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    .theme-label {
      font-size: 18px;
      margin-bottom: 20px;
    }
    #result {
      font-size: 22px;
      font-weight: 700;
      margin: 20px 0 8px;
      min-height: 32px;
    }
    #hint {
      font-size: 12px;
      color: #666;
      margin-bottom: 16px;
      min-height: 16px;
    }
    button.main {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      background: var(--accent, #4b8cff);
      color: white;
      font-weight: 600;
      width: 100%;
      transition: transform 0.05s ease, opacity 0.1s ease, background 0.2s ease, box-shadow 0.1s ease;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.12);
    }
    button.main:active {
      transform: scale(0.97);
      opacity: 0.9;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.16);
    }
    button.main:disabled {
      opacity: 0.6;
      cursor: default;
      background: var(--accent-soft, #8faefc);
      box-shadow: none;
    }
    .action-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 8px;
      margin-bottom: 6px;
    }
    .action-buttons button {
      flex: 1;
      padding: 10px 0;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }
    .complete-btn {
      background: #2ecc71;
      color: white;
    }
    .pending-btn {
      background: #e0e0e0;
      color: #333;
    }

    /* í‰ì¹˜ê¸° ë²„íŠ¼ */
    .tung-container {
      display: none;
      justify-content: flex-end;
      margin-bottom: 8px;
    }
    .tung-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      background: #f1f1f1;
      color: #555;
      cursor: pointer;
    }
    .tung-btn:active {
      transform: scale(0.97);
    }

    .progress-box {
      margin-top: 12px;
      text-align: left;
      font-size: 14px;
    }
    .status-summary {
      font-size: 13px;
      margin-bottom: 6px;
      text-align: right;
      color: #444;
    }
    .progress-bar {
      margin-top: 4px;
      font-size: 18px;
      letter-spacing: 2px;
      text-align: center;
    }
    .checkbox-list {
      margin-top: 12px;
      font-size: 14px;
    }
    .checkbox-list div {
      margin-bottom: 6px;
    }
    .streak-box {
      margin-top: 16px;
      font-size: 13px;
    }
    .streak-bar {
      margin-top: 4px;
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #e0e0e0;
      overflow: hidden;
    }
    .streak-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent, #4b8cff), #2ecc71);
      transition: width 0.3s ease;
    }
    #eventText {
      margin-top: 10px;
      font-size: 12px;
      color: #555;
    }
    .s-glow {
      color: #e67e22;
      text-shadow: 0 0 6px rgba(255, 215, 0, 0.9);
      animation: sPulse 0.8s ease-in-out 2;
    }
    @keyframes sPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }
    .tier-label {
      display: inline-block;
      font-size: 11px;
      font-weight: 600;
      color: #999;
      border: 1px solid #ddd;
      padding: 2px 6px;
      border-radius: 999px;
      margin-right: 6px;
      vertical-align: middle;
    }

    /* ê³µí†µ ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .modal-content {
      background: #ffffff;
      border-radius: 16px;
      padding: 20px 18px 16px;
      width: 90%;
      max-width: 360px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
      font-size: 13px;
      box-sizing: border-box;
    }

    /* ì£¼ê°„ í†µê³„ ëª¨ë‹¬ ì „ìš© */
    .modal-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
    }
    .weekly-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 12px;
    }
    .weekly-label {
      color: #555;
    }
    .weekly-bar {
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      letter-spacing: 1px;
    }
    .modal-close-btn {
      margin-top: 10px;
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 8px 0;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent, #4b8cff);
      color: #fff;
    }

    /* í‰ì¹˜ê¸° ëª¨ë‹¬ ì „ìš© */
    .tung-modal-content {
      padding-top: 16px;
    }
    .tung-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .tung-title {
      font-size: 14px;
      font-weight: 700;
    }
    .tung-close {
      border: none;
      background: transparent;
      font-size: 18px;
      line-height: 1;
      cursor: pointer;
    }
    .tung-options {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .tung-option-btn {
      flex: 1 1 calc(50% - 6px);
      padding: 8px 6px;
      font-size: 12px;
      border-radius: 10px;
      border: 1px solid #eee;
      background: #f9fafb;
      cursor: pointer;
    }
    .tung-option-btn:active {
      transform: scale(0.97);
      background: #e5e7eb;
    }
    .tung-subtext {
      margin-top: 8px;
      font-size: 11px;
      color: #666;
      text-align: right;
    }
    .tung-coin-actions {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .tung-coin-btn {
      width: 100%;
      padding: 8px 6px;
      font-size: 12px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
    }
    .tung-coin-btn:active {
      transform: scale(0.97);
      background: #e5e7eb;
    }

    /* ë‹¬ë ¥ ìŠ¤íƒ€ì¼ */
    #toggleCalendarButton {
      margin-top: 10px;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #ddd;
      background: #ffffff;
      cursor: pointer;
    }
    #calendarContainer {
      margin-top: 10px;
      font-size: 11px;
    }
    .calendar-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
      text-align: center;
    }
    .calendar-table {
      width: 100%;
      border-collapse: collapse;
    }
    .calendar-table th,
    .calendar-table td {
      border: 1px solid #eee;
      text-align: center;
      padding: 4px 2px;
      vertical-align: top;
      min-width: 32px;
    }
    .calendar-table th {
      background: #f8f8f8;
      font-weight: 600;
    }
    .cal-day-number {
      font-weight: 600;
      margin-bottom: 2px;
    }
    .cal-day-tasks {
      color: #555;
    }
    .cal-today {
      background: rgba(75, 140, 255, 0.15);
    }

    /* ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width: 480px) {
      body {
        padding-top: 24px;
      }
      .card {
        padding: 20px 18px;
        border-radius: 14px;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
      }
      h1 {
        font-size: 18px;
      }
      #result {
        font-size: 20px;
      }
      button.main {
        font-size: 15px;
        padding: 12px 16px;
      }
      .checkbox-list {
        font-size: 13px;
      }
      .modal-overlay {
        align-items: flex-end;
      }
      .modal-content {
        max-width: 480px;
        width: 100%;
        border-radius: 16px 16px 0 0;
      }
      .calendar-table th,
      .calendar-table td {
        padding: 3px 1px;
      }

#forceNextDay {
  display: none;
}
    }


  </style>
</head>
<body>
  <div class="card" id="card">
    <h1>í•  ì¼ ëœë¤ ë½‘ê¸°</h1>
    <div class="theme-label" id="themeLabel"></div>

    <button class="main" id="pickButton" onclick="pickRandom()">ì§€ê¸ˆ ë‹¹ì¥ ì´ê±°!</button>

    <div id="result">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘!</div>
    <div id="hint"></div>

    <div class="action-buttons" style="display:none;" id="actionButtons">
      <button class="complete-btn" onclick="markComplete()">ì™„ë£Œ</button>
      <button class="pending-btn" onclick="markPending()">ë³´ë¥˜</button>
    </div>

    <!-- í‰ì¹˜ê¸° ë²„íŠ¼ -->
    <div class="tung-container" id="tungContainer">
      <button class="tung-btn" onclick="openTungModal()">í‰ì¹˜ê¸°</button>
    </div>

    <!-- ì§„í–‰ë„ + ì²´í¬ë¦¬ìŠ¤íŠ¸ + ì—°ê°„ í¼ì„¼íŠ¸ (ì²« í™”ë©´ì—ì„œëŠ” ì•ˆ ë³´ì„) -->
    <div class="progress-box" id="progressContainer" style="display:none;">
      <div class="status-summary" id="statusSummary">ì½”ì¸: 0ê°œ Â· LV 1</div>

      <div id="progressText">ì˜¤ëŠ˜ ì™„ë£Œ: 0 / 7</div>
      <div class="progress-bar" id="progressBar">â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹</div>
      <div class="checkbox-list" id="checkboxList"></div>

      <div class="streak-box">
        <div id="streakText">ì˜¬í•´ ì „ë¶€ ë‹¤ í•œ ë‚ : 0ì¼ / 365ì¼ (0.0%)</div>
        <div class="streak-bar">
          <div class="streak-fill" id="streakFill"></div>
        </div>
      </div>

      <div id="eventText"></div>


      <!-- ì´ë²ˆ ë‹¬ ë‹¬ë ¥ í† ê¸€ ë²„íŠ¼ + ì»¨í…Œì´ë„ˆ -->
      <button id="toggleCalendarButton" onclick="toggleCalendar()">ì´ë²ˆ ë‹¬ ë‹¬ë ¥ ë³´ê¸°</button>
      <div id="calendarContainer" style="display:none;"></div>
<button id="forceNextDay" style="display:none;">ë‚ ì§œ ìˆ˜ë™ ì „í™˜</button>
    </div>
  </div>

  <!-- ìµœê·¼ 7ì¼ í†µê³„ ëª¨ë‹¬ -->
  <div class="modal-overlay" id="weeklyModal">
    <div class="modal-content">
      <div class="modal-title">ìµœê·¼ 7ì¼ ì™„ë£Œ í˜„í™©</div>
      <div id="weeklyStatsBody"></div>
      <button class="modal-close-btn" onclick="closeWeeklyStats()">í™•ì¸</button>
    </div>
  </div>

  <!-- í‰ì¹˜ê¸° ëª¨ë‹¬ -->
  <div class="modal-overlay" id="tungModal">
    <div class="modal-content tung-modal-content">
      <div class="tung-header">
        <div class="tung-title">ì˜¤ëŠ˜ì€ í‰ì¹˜ê¸°â€¦?</div>
        <button class="tung-close" onclick="closeTungModal()">Ã—</button>
      </div>
      <div class="tung-options">
        <button class="tung-option-btn" onclick="pickTungOption('ì˜í™”')">ì˜í™”</button>
        <button class="tung-option-btn" onclick="pickTungOption('ì „ì‹œ')">ì „ì‹œ</button>
        <button class="tung-option-btn" onclick="pickTungOption('ì„ìƒì‹¬ë¦¬ì‚¬ 2ê¸‰ ì‹¤ê¸° ê³µë¶€')">ì„ìƒì‹¬ë¦¬ì‚¬ 2ê¸‰ ì‹¤ê¸° ê³µë¶€</button>
        <button class="tung-option-btn" onclick="pickTungOption('ìš°ì¿¨ë ë ˆ')">ìš°ì¿¨ë ë ˆ</button>
        <button class="tung-option-btn" onclick="pickTungOption('ëœ¨ê°œì§ˆ')">ëœ¨ê°œì§ˆ</button>
        <button class="tung-option-btn" onclick="pickTungOption('ìš”ë¦¬')">ìš”ë¦¬</button>
        <button class="tung-option-btn" onclick="pickTungOption('ì²­ì†Œ')">ì²­ì†Œ</button>
        <button class="tung-option-btn" onclick="pickTungOption('ë²Œë–¡ ê¸°ìƒ')">ë²Œë–¡ ê¸°ìƒ</button>
      </div>
      <div class="tung-subtext">
        ê¸°ë³¸ 1íšŒëŠ” ë¬´ë£Œ, ê·¸ ì´í›„ì—ëŠ” ì½”ì¸ìœ¼ë¡œ ì¶”ê°€ í‰ì¹˜ê¸°ë¥¼ í•  ìˆ˜ ìˆì–´ìš”.
      </div>

      <div class="tung-coin-actions">
        <button class="tung-coin-btn" onclick="useTungCoins(1, 20)">ì½”ì¸ 20ê°œë¡œ ì˜¤ëŠ˜ ì™„ë£Œ +1</button>
        <button class="tung-coin-btn" onclick="useTungCoins(2, 30)">ì½”ì¸ 30ê°œë¡œ ì˜¤ëŠ˜ ì™„ë£Œ +2</button>
        <button class="tung-coin-btn" onclick="useTungCoins(3, 50)">ì½”ì¸ 50ê°œë¡œ ì˜¤ëŠ˜ ì™„ë£Œ +3</button>
      </div>


  <script>
    const tasks = [
      "ë“€ì˜¤ë§ê³ ",
      "Brilliant",
      "ì±… ì½ê¸°",
      "í”Œë­í¬ 1ë¶„+ê°„ë‹¨ ìŠ¤íŠ¸ë ˆì¹­",
      "ë¶€ê¸°ìŠ¤/ë¸”ë¡œê·¸",
      "ë‹¬ë¦¬ê¸°",
      "CBT ë¬¸ì œ í’€ê¸°"
    ];

    const hints = {
      "ë“€ì˜¤ë§ê³ ": "â†’ ì˜ì–´ ë ˆìŠ¨ ì™„ì£¼ë¥¼ í–¥í•´",
      "Brilliant": "â†’ 3ê°œ ì´ìƒ í‘¸ì‹­ì‡¼",
      "ì±… ì½ê¸°": "â†’ í•œ í˜ì´ì§€ë¼ë„...",
      "í”Œë­í¬ 1ë¶„+ê°„ë‹¨ ìŠ¤íŠ¸ë ˆì¹­": "â†’ ëª¸ì„ ì›€ì§ì—¬ë¼!",
      "ë¶€ê¸°ìŠ¤/ë¸”ë¡œê·¸": "â†’ ì±… ë“±ë¡/ë¸”ë¡œê·¸ ì—…ë¡œë“œ/ì¸ìŠ¤íƒ€ ì—…ë¡œë“œ/ë¦¬ë·° ë‹µê¸€ ë­ë“  ì œë°œ!",
      "ë‹¬ë¦¬ê¸°": "â†’ 5ë¶„ì´ë¼ë„! (ë§Œë³´ ëŒ€ì²´ ê°€ëŠ¥ã…)",
      "CBT ë¬¸ì œ í’€ê¸°": "â†’ ìê²©ì¦ ë”°ì•¼ì œ.."
    };

    // ë“±ê¸‰ ì„¤ì •
    const taskTier = {
      "ë‹¬ë¦¬ê¸°": "S",
      "ë¶€ê¸°ìŠ¤/ë¸”ë¡œê·¸": "S",
      "ì±… ì½ê¸°": "A",
      "CBT ë¬¸ì œ í’€ê¸°": "A",
      "Brilliant": "B",
      "í”Œë­í¬ 1ë¶„+ê°„ë‹¨ ìŠ¤íŠ¸ë ˆì¹­": "B",
      "ë“€ì˜¤ë§ê³ ": "B"
    };

    const tierLabel = {
      "S": "Sê¸‰",
      "A": "Aê¸‰",
      "B": "Bê¸‰"
    };

    // ì½”ì¸ ê¸°ë³¸ ë³´ìƒ
    const baseReward = {
      "S": 3,
      "A": 2,
      "B": 1,
      "BONUS": 0
    };

    // í•œêµ­ ê¸°ì¤€ ë‚ ì§œ ë¬¸ìì—´ (YYYY-MM-DD)
// í•œêµ­ ê¸°ì¤€ ë‚ ì§œ (ë¡œì»¬ ì‹œê°„ ê¸°ì¤€, YYYY-MM-DD)
function getKSTDate() {
  const now = new Date(); // ì´ë¯¸ ì‹œìŠ¤í…œì´ KSTë©´ ì´ê²Œ ê³§ í•œêµ­ ì‹œê°„
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, "0");
  const day = String(now.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}

    const today = getKSTDate();

    // ëœë¤ ë²„í”„/ë””ë²„í”„ ëª©ë¡
    const dailyEvents = [
      {
        id: "buff_all_plus1",
        label: "ì˜¤ëŠ˜ì˜ ë²„í”„: ëª¨ë“  ë¯¸ì…˜ ì½”ì¸ +1!",
        type: "buff"
      },
      {
        id: "buff_s_plus1",
        label: "ì˜¤ëŠ˜ì˜ ë²„í”„: Sê¸‰ ë¯¸ì…˜ ì½”ì¸ +1!",
        type: "buff"
      },
      {
        id: "nerf_s_minus1",
        label: "ì˜¤ëŠ˜ì˜ ë””ë²„í”„: Sê¸‰ ë¯¸ì…˜ ì½”ì¸ -1â€¦",
        type: "debuff"
      },
      {
        id: "half_day_full",
        label: "ì˜¤ëŠ˜ì˜ íŠ¹ìˆ˜: 4ê°œë§Œ ì™„ë£Œí•´ë„ 'ì™„ë£Œí•œ ë‚ 'ë¡œ ì¸ì •!",
        type: "special"
      }
    ];

    function loadTaskStatus() {
      const stored = JSON.parse(localStorage.getItem("taskStatus"));
      const storedDate = localStorage.getItem("taskDate");

      if (!stored || storedDate !== today) {
        const reset = {};
        tasks.forEach(t => reset[t] = false);
        localStorage.setItem("taskStatus", JSON.stringify(reset));
        localStorage.setItem("taskDate", today);
        return reset;
      }
      return stored;
    }

    function loadFullDays() {
      const count = parseInt(localStorage.getItem("fullCompleteCount") || "0", 10);
      const lastDate = localStorage.getItem("fullCompleteDate") || "";
      return { count, lastDate };
    }

    function loadCoins() {
      return parseInt(localStorage.getItem("coinCount") || "0", 10);
    }

    function loadDailyEvent() {
      const storedId = localStorage.getItem("dailyEventId");
      const storedDate = localStorage.getItem("dailyEventDate");

      if (!storedId || storedDate !== today) {
        const event = dailyEvents[Math.floor(Math.random() * dailyEvents.length)];
        localStorage.setItem("dailyEventId", event.id);
        localStorage.setItem("dailyEventDate", today);
        return event;
      } else {
        const found = dailyEvents.find(e => e.id === storedId);
        return found || dailyEvents[0];
      }
    }

    // ë‚ ì§œë³„ ì™„ë£Œ ê°œìˆ˜ ì €ì¥ìš©
    function loadDailyStats() {
      const raw = localStorage.getItem("dailyStats");
      if (!raw) return {};
      try {
        return JSON.parse(raw);
      } catch (e) {
        return {};
      }
    }

    function saveDailyStats(stats) {
      localStorage.setItem("dailyStats", JSON.stringify(stats));
    }

    // 2/4/6ê°œ ë‹¬ì„± ì‹œ íŒì—… ì—¬ë¶€ ì €ì¥
    function loadWeeklyPopupStatus() {
      const raw = localStorage.getItem("weeklyPopupStatus");
      if (!raw) return {};
      try {
        return JSON.parse(raw);
      } catch (e) {
        return {};
      }
    }

    function saveWeeklyPopupStatus(status) {
      localStorage.setItem("weeklyPopupStatus", JSON.stringify(status));
    }

    // ì˜¤ëŠ˜ í‰ì¹˜ê¸° ìƒíƒœ (ì™„ë£Œë¡œ ì¸ì •ëœ ê°œìˆ˜, ë¬´ë£Œ í‰ ì‚¬ìš© ì—¬ë¶€)
    let { count: tungCount, freeUsed: tungFreeUsed } = loadTungState();

    let taskStatus = loadTaskStatus();
    let { count: fullCompleteCount, lastDate: fullCompleteDate } = loadFullDays();
    let coinCount = loadCoins();
    let dailyEvent = loadDailyEvent();
    let isPicking = false;
    let hasShownProgress = false;
    let currentTask = null;
    let currentTier = null;
    let skippedTasks = {};

    function getLevel(percent) {
      // 0% -> LV 1, 100% -> LV 10
      const lvl = Math.floor(percent / 10) + 1;
      return Math.min(10, Math.max(1, lvl));
    }

    function getRewardForTask(taskName) {
      const tier = taskTier[taskName] || "B";
      let reward = baseReward[tier];

      // ë³´ë„ˆìŠ¤ëŠ” ê¸°ë³¸ 0, ì´ë²¤íŠ¸ ì˜í–¥ë„ ë°›ì§€ ì•Šê²Œ ìœ ì§€
      if (tier === "BONUS") return 0;

      if (dailyEvent.id === "buff_all_plus1" && reward > 0) {
        reward += 1;
      }
      if (dailyEvent.id === "buff_s_plus1" && tier === "S") {
        reward += 1;
      }
      if (dailyEvent.id === "nerf_s_minus1" && tier === "S") {
        reward = Math.max(0, reward - 1);
      }

      return reward;
    }

    // í‰ í¬í•¨ ì˜¤ëŠ˜ ì™„ë£Œ ê°œìˆ˜
    function getCompletedCount() {
      const base = Object.values(taskStatus).filter(v => v).length;
      const bonus = tungCount; // í‰ìœ¼ë¡œ ì±„ìš´ ì™„ë£Œ ê°œìˆ˜
      return Math.min(tasks.length, base + bonus);
    }

    function updateUI() {
      const baseCompleted = Object.values(taskStatus).filter(v => v).length;
      const completed = getCompletedCount();

      // ì˜¤ëŠ˜ì„ "ì™„ë£Œí•œ ë‚ "ë¡œ ì¸ì •í•˜ëŠ” ê¸°ì¤€
      let fullNeeded = tasks.length;
      if (dailyEvent.id === "half_day_full") {
        fullNeeded = Math.ceil(tasks.length / 2); // 4ê°œ ì´ìƒì´ë©´ í•˜ë£¨ ì¸ì •
      }

      if (completed >= fullNeeded && fullCompleteDate !== today) {
        fullCompleteCount += 1;
        fullCompleteDate = today;
        localStorage.setItem("fullCompleteCount", String(fullCompleteCount));
        localStorage.setItem("fullCompleteDate", fullCompleteDate);
      }

      // ì˜¤ëŠ˜ ì™„ë£Œ ê°œìˆ˜ -> ì¼ë³„ í†µê³„ì— ì €ì¥
      const stats = loadDailyStats();
      stats[today] = completed;
      saveDailyStats(stats);


      // ì˜¤ëŠ˜ ì§„í–‰ë„
      document.getElementById("progressText").textContent =
        `ì˜¤ëŠ˜ ì™„ë£Œ: ${completed} / ${tasks.length}`;

      const circle = "â—".repeat(completed) + "â—‹".repeat(tasks.length - completed);
      document.getElementById("progressBar").textContent = circle;

      const listEl = document.getElementById("checkboxList");
      listEl.innerHTML = "";
      tasks.forEach(t => {
        const div = document.createElement("div");
        div.textContent = (taskStatus[t] ? "âœ” " : "â–¡ ") + t;
        listEl.appendChild(div);
      });

      // ì—°ê°„ í¼ì„¼íŠ¸ + ë ˆë²¨
      const percent = Math.min(100, (fullCompleteCount / 365) * 100);
      const level = getLevel(percent);

      document.getElementById("streakText").textContent =
        `ì˜¬í•´ ì „ë¶€ ë‹¤ í•œ ë‚ : ${fullCompleteCount}ì¼ / 365ì¼ (${percent.toFixed(1)}%)`;
      document.getElementById("streakFill").style.width = `${percent}%`;

      // ì½”ì¸ + ë ˆë²¨ í‘œì‹œ
      document.getElementById("statusSummary").textContent =
        `ì½”ì¸: ${coinCount}ê°œ Â· LV ${level}`;

      // ì˜¤ëŠ˜ì˜ ë²„í”„/ë””ë²„í”„ í‘œì‹œ
      document.getElementById("eventText").textContent = dailyEvent.label;

      updateTungButtonVisibility();
    }

    function showProgressIfNeeded() {
      if (!hasShownProgress) {
        document.getElementById("progressContainer").style.display = "block";
        hasShownProgress = true;
      }
    }

    function updateTungButtonVisibility() {
      const container = document.getElementById("tungContainer");
      if (!container) return;

      const completed = getCompletedCount();

      // ì•„ì§ ì•„ë¬´ ë¯¸ì…˜ë„ ë½‘ì§€ ì•Šì•˜ìœ¼ë©´ ìˆ¨ê¹€
      if (!currentTask) {
        container.style.display = "none";
        return;
      }

      // ì˜¤ëŠ˜ í•  ì¼ì„ ì „ë¶€ ë‹¤ ì±„ì› ìœ¼ë©´ ìˆ¨ê¹€
      if (completed >= tasks.length) {
        container.style.display = "none";
      } else {
        container.style.display = "flex";
      }
    }

    // 10ê°€ì§€ ì¼ì¼ í…Œë§ˆ (KST ê¸°ì¤€ ë‚ ì§œë¡œ ë§¤ì¼ ë³€ê²½)
    function applyTheme() {
      const kstStr = getKSTDate();
      const [y, m, d] = kstStr.split("-").map(Number);
      const date = new Date(y, m - 1, d);
      const yearStart = new Date(date.getFullYear(), 0, 1);
      const diffDays = Math.floor((date - yearStart) / 86400000);

      const themes = [
        { emoji: "ğŸŒ…", bodyBg: "#fff5e6", cardBg: "#ffffff", accent: "#ff7b54", accentSoft: "#ffb199", isDark: false },
        { emoji: "ğŸŒŠ", bodyBg: "#e6f5ff", cardBg: "#ffffff", accent: "#3f8cff", accentSoft: "#9ac3ff", isDark: false },
        { emoji: "ğŸŒ¿", bodyBg: "#eef8f2", cardBg: "#ffffff", accent: "#2ecc71", accentSoft: "#8be3aa", isDark: false },

        // ìš°ì£¼(ë‹¤í¬) í…Œë§ˆ
        { emoji: "ğŸŒŒ", bodyBg: "#050816", cardBg: "#111827", accent: "#6366f1", accentSoft: "#a5b4fc", isDark: true },

        { emoji: "â˜•ï¸", bodyBg: "#f7f0ea", cardBg: "#ffffff", accent: "#b85c38", accentSoft: "#d19d85", isDark: false },
        { emoji: "ğŸ“š", bodyBg: "#f6f4ff", cardBg: "#ffffff", accent: "#7c3aed", accentSoft: "#c4b5fd", isDark: false },
        { emoji: "ğŸ”¥", bodyBg: "#fff1f2", cardBg: "#ffffff", accent: "#f97373", accentSoft: "#fecaca", isDark: false },
        { emoji: "ğŸŒˆ", bodyBg: "linear-gradient(135deg,#fdf2ff,#e0f2fe)", cardBg: "#ffffff", accent: "#ec4899", accentSoft: "#f9a8d4", isDark: false },
        { emoji: "ğŸ§Š", bodyBg: "#edf5ff", cardBg: "#ffffff", accent: "#0ea5e9", accentSoft: "#7dd3fc", isDark: false },
        { emoji: "ğŸ€", bodyBg: "#f1fdf3", cardBg: "#ffffff", accent: "#16a34a", accentSoft: "#6ee7b7", isDark: false }
      ];

      const theme = themes[diffDays % themes.length];

      document.getElementById("themeLabel").textContent = theme.emoji;

      document.body.style.setProperty("--accent-bg", theme.bodyBg);
      document.documentElement.style.setProperty("--accent", theme.accent);
      document.documentElement.style.setProperty("--accent-soft", theme.accentSoft);

      document.body.style.background = theme.bodyBg;
      const card = document.getElementById("card");
      if (card) {
        card.style.background = theme.cardBg;
      }

      if (theme.isDark) {
        document.body.style.color = "#f5f5f5";
        document.getElementById("card").style.color = "#f5f5f5";
        document.querySelectorAll(".status-summary, #progressText, #progressBar, .checkbox-list div, #streakText, #eventText, .calendar-title").forEach(el => {
          el.style.color = "#e6e6e6";
        });

        document.querySelectorAll(".cal-day-number, .cal-day-tasks").forEach(el => {
          el.style.color = "#ffffff";
        });

        document.querySelectorAll(".calendar-table th, .calendar-table td").forEach(el => {
          el.style.borderColor = "rgba(255,255,255,0.2)";
        });

        document.querySelectorAll("button.main").forEach(el => {
          el.style.color = "#ffffff";
        });
      } else {
        document.body.style.color = "#000000";
        document.getElementById("card").style.color = "#000000";

        document.querySelectorAll(".status-summary, #progressText, #progressBar, .checkbox-list div, #streakText, #eventText, .calendar-title").forEach(el => {
          el.style.color = "";
        });

        document.querySelectorAll(".cal-day-number, .cal-day-tasks").forEach(el => {
          el.style.color = "";
        });

        document.querySelectorAll(".calendar-table th, .calendar-table td").forEach(el => {
          el.style.borderColor = "";
        });

        document.querySelectorAll("button.main").forEach(el => {
          el.style.color = "#ffffff";
        });
      }
    }

    applyTheme();
    updateUI(); // ë°ì´í„°ëŠ” ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘ê³ , í™”ë©´ì€ ì²« ê²°ê³¼ ì´í›„ì—ë§Œ í‘œì‹œë¨

    // ìµœê·¼ 7ì¼ ë°ì´í„° ìƒì„±
    function buildLast7DaysData() {
      const stats = loadDailyStats();
      const [y, m, d] = today.split("-").map(Number);
      const base = new Date(y, m - 1, d);
      const result = [];

      for (let i = 6; i >= 0; i--) {
        const dt = new Date(base);
        dt.setDate(base.getDate() - i);
        const yy = dt.getFullYear();
        const mm = String(dt.getMonth() + 1).padStart(2, "0");
        const dd = String(dt.getDate()).padStart(2, "0");
        const key = `${yy}-${mm}-${dd}`;
        const cnt = stats[key] || 0;
        result.push({
          key,
          label: `${mm}/${dd}`,
          count: cnt
        });
      }
      return result;
    }

    function openWeeklyStatsModal() {
      const data = buildLast7DaysData();
      const body = document.getElementById("weeklyStatsBody");
      body.innerHTML = "";

      data.forEach(item => {
        const row = document.createElement("div");
        row.className = "weekly-row";

        const label = document.createElement("div");
        label.className = "weekly-label";
        label.textContent = item.label;

        const bar = document.createElement("div");
        bar.className = "weekly-bar";
        const filled = "â—".repeat(item.count);
        const empty = "â—‹".repeat(tasks.length - item.count);
        bar.textContent = `${filled}${empty} (${item.count}/${tasks.length})`;

        row.appendChild(label);
        row.appendChild(bar);
        body.appendChild(row);
      });

      const modal = document.getElementById("weeklyModal");
      modal.style.display = "flex";
    }

    function closeWeeklyStats() {
      const modal = document.getElementById("weeklyModal");
      modal.style.display = "none";
    }

    // 2/4/6ê°œ ì™„ë£Œ ì‹œ ì£¼ê°„ ê·¸ë˜í”„ ìë™ íŒì—…
    function checkAndShowWeeklyStats() {
      const completed = getCompletedCount();
      const thresholds = [2, 4, 6];

      if (!thresholds.includes(completed)) return;

      const status = loadWeeklyPopupStatus();
      const todayStatus = status[today] || {};

      // ì´ë¯¸ ì´ ê°œìˆ˜ì—ì„œ í•œ ë²ˆ íŒì—…í–ˆìœ¼ë©´ ìŠ¤í‚µ
      if (todayStatus[completed]) return;

      // ê¸°ë¡ ë‚¨ê¸°ê³  íŒì—…
      todayStatus[completed] = true;
      status[today] = todayStatus;
      saveWeeklyPopupStatus(status);

      openWeeklyStatsModal();
    }
    function loadTungState() {
      const storedDate = localStorage.getItem("tungDate");

      // ë‚ ì§œê°€ ë°”ë€Œì—ˆìœ¼ë©´ í‰ ê´€ë ¨ ìƒíƒœ ë¦¬ì…‹
      if (storedDate !== today) {
        localStorage.setItem("tungDate", today);
        localStorage.setItem("tungCount", "0");
        localStorage.setItem("tungFreeUsed", "0");
        localStorage.removeItem("tungChoice");
        return { count: 0, freeUsed: false };
      } else {
        const count = parseInt(localStorage.getItem("tungCount") || "0", 10);
        const freeUsed = localStorage.getItem("tungFreeUsed") === "1";
        return { count, freeUsed };
      }
    }

    // ë‹¬ë ¥ ìƒì„±
    function buildMonthlyCalendar() {
      const stats = loadDailyStats();
      const [y, m, _d] = today.split("-").map(Number);
      const year = y;
      const month = m; // 1~12

      const firstDay = new Date(year, month - 1, 1).getDay(); // 0(ì¼)~6(í† )
      const lastDate = new Date(year, month, 0).getDate();

      const container = document.getElementById("calendarContainer");
      container.innerHTML = "";

      const title = document.createElement("div");
      title.className = "calendar-title";
      title.textContent = `${year}ë…„ ${month}ì›”`;
      container.appendChild(title);

      const table = document.createElement("table");
      table.className = "calendar-table";

      const thead = document.createElement("thead");
      const headRow = document.createElement("tr");
      const weekdays = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
      weekdays.forEach(w => {
        const th = document.createElement("th");
        th.textContent = w;
        headRow.appendChild(th);
      });
      thead.appendChild(headRow);
      table.appendChild(thead);

      const tbody = document.createElement("tbody");
      let row = document.createElement("tr");
      let cellCount = 0;

      // ì• ê³µë°± ì…€
      for (let i = 0; i < firstDay; i++) {
        const td = document.createElement("td");
        row.appendChild(td);
        cellCount++;
      }

      for (let day = 1; day <= lastDate; day++) {
        if (cellCount === 7) {
          tbody.appendChild(row);
          row = document.createElement("tr");
          cellCount = 0;
        }

        const td = document.createElement("td");
        const dd = String(day).padStart(2, "0");
        const mm = String(month).padStart(2, "0");
        const key = `${year}-${mm}-${dd}`;
        const cnt = stats[key] || 0;

        const num = document.createElement("div");
        num.className = "cal-day-number";
        num.textContent = day;

        const info = document.createElement("div");
        info.className = "cal-day-tasks";
        info.textContent = `${cnt}/${tasks.length}`;

        td.appendChild(num);
        td.appendChild(info);

        // ì˜¤ëŠ˜ ê°•ì¡°
        if (key === today) {
          td.classList.add("cal-today");
        }

        row.appendChild(td);
        cellCount++;
      }

      // ë§ˆì§€ë§‰ ì¤„ ë‚¨ì€ ì…€ ê³µë°± ì²˜ë¦¬
      if (cellCount > 0 && cellCount < 7) {
        for (let i = cellCount; i < 7; i++) {
          const td = document.createElement("td");
          row.appendChild(td);
        }
        tbody.appendChild(row);
      } else if (cellCount === 7) {
        tbody.appendChild(row);
      }

      table.appendChild(tbody);
      container.appendChild(table);
    }

function toggleCalendar() {
  const container = document.getElementById("calendarContainer");
  const btn = document.getElementById("toggleCalendarButton");
  const forceBtn = document.getElementById("forceNextDay");

  if (container.style.display === "none" || !container.style.display) {
    buildMonthlyCalendar();
    container.style.display = "block";
    btn.textContent = "ë‹¬ë ¥ ë‹«ê¸°";

    // âœ… ë‹¬ë ¥ ì¼œì§ˆ ë•Œë§Œ ë‚ ì§œ ìˆ˜ë™ ì „í™˜ ë²„íŠ¼ ë³´ì´ê¸°
    if (forceBtn) {
      forceBtn.style.display = "inline-block"; // ë˜ëŠ” "block"
    }
  } else {
    container.style.display = "none";
    btn.textContent = "ì´ë²ˆ ë‹¬ ë‹¬ë ¥ ë³´ê¸°";

    // âœ… ë‹¬ë ¥ ë‹«íˆë©´ ë‹¤ì‹œ ìˆ¨ê¸°ê¸°
    if (forceBtn) {
      forceBtn.style.display = "none";
    }
  }
}

    function pickRandom() {
      if (isPicking) return;
      isPicking = true;

      const pickBtn = document.getElementById("pickButton");
      const resultEl = document.getElementById("result");
      const hintEl = document.getElementById("hint");

      pickBtn.disabled = true;
      pickBtn.textContent = "ê³ ë¥´ëŠ” ì¤‘...";

      document.getElementById("actionButtons").style.display = "none";
      resultEl.classList.remove("s-glow");

// âœ… ì™„ë£Œë„ ì•ˆ í–ˆê³ , ë³´ë¥˜ë„ ì•ˆ ëœ ë¯¸ì…˜ë§Œ í›„ë³´ì— í¬í•¨
const available = tasks.filter(t => !taskStatus[t] && !skippedTasks[t]);

if (available.length === 0) {
  const remaining = tasks.filter(t => !taskStatus[t]);

  if (remaining.length === 0) {
    // ì§„ì§œë¡œ ì˜¤ëŠ˜ ë‹¤ í•œ ê²½ìš°
    resultEl.textContent = "ì˜¤ëŠ˜ í•  ì¼ ì™„ë£Œ!";
    hintEl.textContent = "";
  } else {
    // ì•„ì§ ë‚¨ì€ ë¯¸ì…˜ì€ ìˆì§€ë§Œ ì „ë¶€ ë³´ë¥˜í•œ ê²½ìš°
    resultEl.textContent = "ë³´ë¥˜í•œ ë¯¸ì…˜ë§Œ ë‚¨ì•˜ì–´ìš”. ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€!";
    hintEl.textContent = "ë³´ë¥˜ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë¼ìš”.";
  }

  pickBtn.disabled = false;
  pickBtn.textContent = "ì§€ê¸ˆ ë‹¹ì¥ ì´ê±°!";
  isPicking = false;
  showProgressIfNeeded();
  updateTungButtonVisibility();
  return;
}

      // ê³ ë¯¼ ì¤‘... ì• ë‹ˆë©”ì´ì…˜
      let dots = 0;
      resultEl.textContent = "ê³ ë¯¼ ì¤‘";
      hintEl.textContent = "2ì´ˆë§Œ ê¸°ë‹¤ë ¤ì¤˜â€¦";
      const loading = setInterval(() => {
        dots = (dots + 1) % 4;
        resultEl.textContent = "ê³ ë¯¼ ì¤‘" + ".".repeat(dots);
      }, 400);

      setTimeout(() => {
        clearInterval(loading);

        const finalChoice = available[Math.floor(Math.random() * available.length)];
        const finalTier = taskTier[finalChoice] || "B";

        currentTask = finalChoice;
        currentTier = finalTier;

        const label = tierLabel[finalTier] || "Bê¸‰";
        const badge = `<span class="tier-label">${label}</span>`;
        const safeText = finalChoice.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        resultEl.innerHTML = `${badge}${safeText}`;

        const baseHint = hints[finalChoice] || "";
        if (finalTier === "S") {
          resultEl.classList.add("s-glow");
          hintEl.textContent = `âœ¨ Sê¸‰ ë¯¸ì…˜ ë“±ì¥! âœ¨ ${baseHint}`;
        } else {
          hintEl.textContent = baseHint;
        }

        document.getElementById("actionButtons").style.display = "flex";

        pickBtn.disabled = false;
        pickBtn.textContent = "ì§€ê¸ˆ ë‹¹ì¥ ì´ê±°!";
        isPicking = false;

        showProgressIfNeeded();
        updateTungButtonVisibility();
      }, 2000);
    }

    function markComplete() {
      if (!currentTask || !tasks.includes(currentTask)) return;

      if (taskStatus[currentTask]) {
        document.getElementById("hint").textContent = "ì´ë¯¸ ì™„ë£Œí•œ ë¯¸ì…˜ì´ì—ìš”!";
        hideButtons();
        return;
      }

      taskStatus[currentTask] = true;
      localStorage.setItem("taskStatus", JSON.stringify(taskStatus));

      const reward = getRewardForTask(currentTask);
      if (reward > 0) {
        coinCount += reward;
        localStorage.setItem("coinCount", String(coinCount));
        document.getElementById("hint").textContent =
          `ì™„ë£Œ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤! (+${reward}ì½”ì¸)`;
      } else {
        document.getElementById("hint").textContent =
          "ì™„ë£Œ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!";
      }

      hideButtons();
      updateUI();
      checkAndShowWeeklyStats();
    }

    function hideButtons() {
      document.getElementById("actionButtons").style.display = "none";
    }

function markPending() {
  // í˜„ì¬ ë½‘íŒ ë¯¸ì…˜ì´ ì—†ë‹¤ë©´ ê·¸ëƒ¥ ë²„íŠ¼ë§Œ ìˆ¨ê¸°ê¸°
  if (!currentTask || !tasks.includes(currentTask)) {
    hideButtons();
    return;
  }

  // ì´ ë¯¸ì…˜ì€ ì˜¤ëŠ˜ ì„¸ì…˜ì—ì„œ ì œì™¸!
  skippedTasks[currentTask] = true;

  document.getElementById("hint").textContent =
    "ì ê¹ íŒ¨ìŠ¤!";

  hideButtons();
}

    function openTungModal() {
      const completed = getCompletedCount();
      if (completed >= tasks.length) {
        document.getElementById("hint").textContent =
          "ì´ë¯¸ ë¯¸ì…˜ í´ë¦¬ì–´ âš¡";
        return;
      }
      document.getElementById("tungModal").style.display = "flex";
    }

    function closeTungModal() {
      document.getElementById("tungModal").style.display = "none";
    }

    function pickTungOption(name) {
      const completed = getCompletedCount();
      if (completed >= tasks.length) {
        document.getElementById("hint").textContent =
          "ì˜¤ëŠ˜ í•  ì¼ ë‹¤ ì±„ì›€!";
        closeTungModal();
        return;
      }

      // ì•„ì§ ë¬´ë£Œ í‰ì„ ì•ˆ ì“´ ê²½ìš° â†’ ë¬´ë£Œ 1íšŒ
      if (!tungFreeUsed) {
        tungFreeUsed = true;
        tungCount += 1;

        localStorage.setItem("tungFreeUsed", "1");
        localStorage.setItem("tungCount", String(tungCount));
        localStorage.setItem("tungDate", today);
        localStorage.setItem("tungChoice", name);

        document.getElementById("hint").textContent =
          `'${name}'(ìœ¼)ë¡œ ì˜¤ëŠ˜ì€ í‰! (ë¬´ë£Œ í‰ì¹˜ê¸°, ì™„ë£Œ +1 ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤)`;
      } else {
        // ë¬´ë£Œ í‰ì€ ì´ë¯¸ ì‚¬ìš© â†’ ì½”ì¸ 5ê°œë¡œ ì¶”ê°€ í‰ì¹˜ê¸°
        if (coinCount < 5) {
          document.getElementById("hint").textContent =
            "ì½”ì¸ì´ ë¶€ì¡±í•´ì„œ ì¶”ê°€ í‰ì¹˜ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”. (í•„ìš”: 5ì½”ì¸)";
          closeTungModal();
          return;
        }

        coinCount -= 5;
        tungCount += 1;

        localStorage.setItem("coinCount", String(coinCount));
        localStorage.setItem("tungCount", String(tungCount));
        localStorage.setItem("tungDate", today);
        localStorage.setItem("tungChoice", name);

        document.getElementById("hint").textContent =
          `'${name}'(ìœ¼)ë¡œ í‰ì¹˜ê¸°! (ì½”ì¸ 5ê°œ ì‚¬ìš©, ì™„ë£Œ +1 ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤)`;
      }

      closeTungModal();
      updateUI();
      checkAndShowWeeklyStats();
    }

    function useTungCoins(addCount, cost) {
      if (coinCount < cost) {
        document.getElementById("hint").textContent =
          `ì½”ì¸ì´ ë¶€ì¡±í•´ìš”. (í•„ìš”: ${cost}ì½”ì¸)`;
        return;
      }

      const completed = getCompletedCount();
      const remaining = tasks.length - completed;

      if (remaining <= 0) {
        document.getElementById("hint").textContent =
          "ì˜¤ëŠ˜ í•  ì¼ì€ ì´ë¯¸ ëª¨ë‘ ì™„ë£Œí–ˆì–´ìš”!";
        closeTungModal();
        return;
      }

      // ë‚¨ì€ ì¹¸ë³´ë‹¤ ë” ë§ì´ í‰ì¹˜ì§€ ì•Šë„ë¡ ì¡°ì •
      const actualAdd = Math.min(addCount, remaining);

      coinCount -= cost;
      tungCount += actualAdd;

      localStorage.setItem("coinCount", String(coinCount));
      localStorage.setItem("tungCount", String(tungCount));
      localStorage.setItem("tungDate", today);

      document.getElementById("hint").textContent =
        `ì½”ì¸ ${cost}ê°œë¥¼ ì‚¬ìš©í•´ ì˜¤ëŠ˜ ì™„ë£Œ ${actualAdd}ê°œë¥¼ í‰ì³¤ì–´ìš”!`;

      closeTungModal();
      updateUI();
      checkAndShowWeeklyStats();
    }

document.getElementById("forceNextDay").addEventListener("click", () => {
  const stats = loadDailyStats();
  const newToday = getKSTDate(); // ìµœì‹  ë‚ ì§œ ë‹¤ì‹œ ê³„ì‚°

  // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ë¦¬ì…‹
  localStorage.setItem("taskDate", newToday);
  localStorage.setItem("dailyEventDate", newToday);
  localStorage.setItem("tungDate", newToday);

  // í‰ ê´€ë ¨ ì´ˆê¸°í™”
  localStorage.setItem("tungCount", "0");
  localStorage.setItem("tungFreeUsed", "0");
  localStorage.removeItem("tungChoice");

  // ë¯¸ì…˜ ìƒíƒœ ë¦¬ì…‹
  const reset = {};
  tasks.forEach(t => reset[t] = false);
  localStorage.setItem("taskStatus", JSON.stringify(reset));

  alert("ë‚ ì§œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤!");
  location.reload();
});

  </script>
</body>
</html>
